desertJump=new Game,desertJump.startGame=function(){function e(e){var a=String.fromCharCode(e.keyCode);"D"==a&&(o.frontWheel.angularVelocity+=.8,o.backWheel.angularVelocity+=.8,o.frontWheel.angularVelocity>40&&(o.frontWheel.angularVelocity=40),o.backWheel.angularVelocity>40&&(o.backWheel.angularVelocity=40),o.frontWheel.SetAngularVelocity(o.frontWheel.angularVelocity),o.backWheel.SetAngularVelocity(o.backWheel.angularVelocity))}function a(){o.chassis.m_sweep.c.y>25&&0==c&&(gameFinished(!1),c=!0,t.endGame(l)),l.Step(1/60,10,10),l.DrawDebugData(),l.ClearForces()}var t=this,l=new b2World(new b2Vec2(0,12),!0),n=(createStaticBox(l,-12,23,30,4),createStaticBox(l,55,23,30,4));n.name="rightFloor";var o=(createStaticBox(l,10,-1.8,30,2),createStaticBox(l,-1.8,13,2,14),createStaticTriange(l,[-9,0],[0,-3],[0,0],[18,19]),makeCar(l,15,10));document.addEventListener("keydown",e,!0),$("#gas-pedal").mousedown(function(){o.frontWheel.angularVelocity+=6,o.backWheel.angularVelocity+=6,o.frontWheel.angularVelocity<0&&(o.frontWheel.angularVelocity/=4),o.backWheel.angularVelocity<0&&(o.backWheel.angularVelocity/=4),o.frontWheel.angularVelocity>40&&(o.frontWheel.angularVelocity=40),o.backWheel.angularVelocity>40&&(o.backWheel.angularVelocity=40),o.frontWheel.SetAngularVelocity(4*o.frontWheel.angularVelocity),o.backWheel.SetAngularVelocity(4*o.backWheel.angularVelocity)});var r=new b2DebugDraw;r.SetSprite(document.getElementById("canvas").getContext("2d")),r.SetDrawScale(30),r.SetFillAlpha(.5),r.SetLineThickness(1),r.SetFlags(b2DebugDraw.e_shapeBit|b2DebugDraw.e_jointBit),l.SetDebugDraw(r);var c=!1,i=new Box2D.Dynamics.b2ContactListener;i.BeginContact=function(e){cBodyA=e.GetFixtureA().GetBody().name,cBodyB=e.GetFixtureB().GetBody().name,0==c&&("backWheel"==cBodyA&&"rightFloor"==cBodyB||"backWheel"==cBodyB&&"rightFloor"==cBodyA?(gameFinished(!0),c=!0,t.endGame(l)):("chassis"==cBodyA&&"rightFloor"==cBodyB||"chassis"==cBodyB&&"rightFloor"==cBodyA)&&(gameFinished(!1),c=!0,t.endGame(l)))},l.SetContactListener(i),window.setInterval(a,1e3/60)},desertJump.endGame=function(e){e=null};