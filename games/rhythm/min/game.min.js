rhythm=new Game,rhythm.startGame=function(){function t(t,o){this.x=t,this.y=o}function o(o){var e=[],n=250*o,r=[];for(i=200;n>i;i+=200)r.push(-i);var e=[];for(i=0;o>i;i++){var a=Math.floor(Math.random()*r.length);e.push(r[a]),r.splice(a,1)}console.log(e);var u=[h/6,h/2,5*h/6],c=[];for(i=0;o>i;i++){var l=u[i%3],s=e[i],d=new t(l,s);c.push(d)}return c}function e(){for(i=0;i<w.length;i++)note=w[i],null!=note&&(note.y+=l);r(m,h,f,w,y)}function n(t,o){var e=!0;for(i=0;i<w.length;i++)note=w[i],null!=note&&note.y-o<=t&&(e=!1);return e}function r(t,o,e,r,c){t.clearRect(0,0,o,e);var l=t.createLinearGradient(0,0,0,e/5);l.addColorStop(0,"#fff"),l.addColorStop(1,"#e74c3c"),t.fillStyle=l,t.fillRect(0,0,o/3,e);var l=t.createLinearGradient(o/3,0,o/3,e/5);l.addColorStop(0,"#fff"),l.addColorStop(1,"#2ecc71"),t.fillStyle=l,t.fillRect(o/3,0,o/3,e);var l=t.createLinearGradient(2*o/3,0,2*o/3,e/5);l.addColorStop(0,"#fff"),l.addColorStop(1,"#3498db"),t.fillStyle=l,t.fillRect(2*o/3,0,2*o/3,e),t.beginPath(),t.moveTo(o/3,0),t.lineTo(o/3,e),t.lineWidth=3,t.stroke(),t.beginPath(),t.moveTo(2*o/3,0),t.lineTo(2*o/3,e),t.lineWidth=3,t.stroke();var s=parseInt($(".button").css("top"));for(i=0;3>i;i++){var d="#button"+i;$(d).css("border-color","black")}for(i=0;i<r.length;i++)if(note=r[i],null!==note){t.beginPath();var h=o/3,f=note.x,m=note.y,b=h/8,v=0,g=2*Math.PI,p=!1;t.lineWidth=1,t.arc(f,m,b,v,g,p);var l=t.createLinearGradient(0,0,0,e/5);if(l.addColorStop(0,"#fff"),l.addColorStop(1,"#f1c40f"),t.fillStyle=l,t.fill(),t.stroke(),m>=s-b&&e>=m){var y=i%3,d="#button"+y;$(d).css("border-color","yellow"),a(c,y,r,note)}}n(e,b)===!0&&u(r)}function a(t,o,e,n){t.indexOf(o)>-1&&(noteIdx=e.indexOf(n),e[noteIdx]=null)}function u(t){var o=!0;for(i=0;i<t.length;i++)null!=t[i]&&(o=!1);o?(s.winOrLoss=!0,s.gameOver||s.endGame(),s.gameOver=!0):(s.winOrLoss=!1,s.gameOver||s.endGame(),s.gameOver=!0)}var c=6,l=3,s=this,d=document.getElementById("canvas"),h=$(window).width(),f=$(window).height();d.setAttribute("width",h),d.setAttribute("height",f);var m=d.getContext("2d"),b='<div id="rhythm"><button class="button" id="button0"></button><button class="button" id="button1"></button><button class="button" id="button2"></button><audio id="note1" src="games/rhythm/audio/note1.mp3"></audio><audio id="note2" src="games/rhythm/audio/note2.mp3"></audio><audio id="note3" src="games/rhythm/audio/note3.mp3"></audio></div>';$("body").prepend(b),$("head").append('<link rel="stylesheet" href="./games/rhythm/rhythm.css" type="text/css" />');var v=document.getElementById("note1"),g=document.getElementById("note2"),p=document.getElementById("note3");v.volume=.3,g.volume=.3,p.volume=.3,$("#button0").css("left",0),$("#button0").css("width",h/3-5),$("#button1").css("left",h/3+5),$("#button1").css("width",h/3-10),$("#button2").css("left",2*h/3+5),$("#button2").css("width",h/3-10);var y=[],w=o(c);s.gameLoop=setInterval(e,10),s.gameOver=!1,$("#button0").on("mousedown touchstart click",function(){v.play(),$("#button0").css("background-color","#f1c40f"),y.push(0)}).bind("mouseup touchend click mouseleave",function(){$("#button0").css("background-color","red");var t=y.indexOf(0);y.splice(t,1)}),$("#button1").on("mousedown touchstart click",function(){g.play(),$("#button1").css("background-color","#f1c40f"),y.push(1)}).bind("mouseup touchend click mouseleave",function(){$("#button1").css("background-color","green");var t=y.indexOf(1);y.splice(t,1)}),$("#button2").on("mousedown touchstart click",function(){p.play(),$("#button2").css("background-color","#f1c40f"),y.push(2)}).bind("mouseup touchend click mouseleave",function(){$("#button2").css("background-color","blue");var t=y.indexOf(2);y.splice(t,1)})},rhythm.endGame=function(){function t(){clearInterval(e.gameLoop),gameFinished(e.winOrLoss)}function o(){$("#rhythm").remove()}var e=this;e.gameOver=!0,setTimeout(t,100),setTimeout(o,2e3)},gameObjectsArray.push(rhythm);